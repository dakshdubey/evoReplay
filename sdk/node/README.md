# EvoReplay for Node.js (`evoreplay-node`)

The Reference Implementation of the EvoReplay Deterministic Execution SDK.

## Installation

```bash
npm install evoreplay-node
```

## Quick Start

### 1. Initialize
Add this **as early as possible** in your application entry point (e.g., `index.js` or `app.js`).

```javascript
const { EvoReplay } = require('evoreplay-node');

EvoReplay.init({
    mode: 'production',
    privacy: 'strict'
});
```

### 2. Manual Capture (Optional)
While EvoReplay automatically captures `Date.now()`, `Math.random()`, and external I/O, you can manually wrap critical logic.

```javascript
// Capture a boolean decision for the replay graph
const isFeatured = EvoReplay.captureDecision('feature_flag_check', () => {
    return checkFeatureFlag('new-ui');
});
```

## CLI Usage (Replay)

You can replay artifacts generated by this SDK using the `evoreplay` command inside the artifact.

```bash
# If you have the global CLI or Go CLI installed
evoreplay replay crash_123.evor
```

## API Reference

### `EvoReplay.init(config)`
*   `config.mode`: `'production'` (default) or `'debug'`
*   `config.privacy`: `'strict'` (hashes inputs) or `'relaxed'`

### `EvoReplay.startRecording(contextId)`
Manually start a trace for a specific request ID.

### `EvoReplay.stopRecording()`
Returns the artifact (string/buffer) and halts recording.

## License
MIT
